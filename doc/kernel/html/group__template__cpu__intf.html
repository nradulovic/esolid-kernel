<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>eSolid - Real-Time Kernel: CPU port interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="eSolid-logo_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">eSolid - Real-Time Kernel
   &#160;<span id="projectnumber">1.0BetaR01</span>
   </div>
   <div id="projectbrief">Event Based System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="/"><span>Home&#160;page</span></a></li>
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">CPU port interface<div class="ingroups"><a class="el" href="group__template.html">Port template</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>CPU port macros and functions.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for CPU port interface:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__template__cpu__intf.png" border="0" alt="" usemap="#group____template____cpu____intf"/>
<map name="group____template____cpu____intf" id="group____template____cpu____intf">
<area shape="rect" id="node1" href="group__template.html" title="Templates. " alt="" coords="6,5,106,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structportStck.html">portStck</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stack structure used for stack declaration in order to force the alignment Alignment of stack structure.  <a href="structportStck.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structportCtx.html">portCtx</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Port context structure.  <a href="structportCtx.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga99980ab56ce9857e7380210d12e3d41f"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a></td></tr>
<tr class="memdesc:ga99980ab56ce9857e7380210d12e3d41f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data type which corresponds to the general purpose register.  <a href="#ga99980ab56ce9857e7380210d12e3d41f">More...</a><br/></td></tr>
<tr class="separator:ga99980ab56ce9857e7380210d12e3d41f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga13cc91970e3e05fe4210440c068d3f4a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structportStck.html">portStck</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga13cc91970e3e05fe4210440c068d3f4a">portStck_T</a></td></tr>
<tr class="memdesc:ga13cc91970e3e05fe4210440c068d3f4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stack type.  <a href="#ga13cc91970e3e05fe4210440c068d3f4a">More...</a><br/></td></tr>
<tr class="separator:ga13cc91970e3e05fe4210440c068d3f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga76dd98d1f19ff5ce4b4e880dfcedadb9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga76dd98d1f19ff5ce4b4e880dfcedadb9">gPortIsrNesting_</a></td></tr>
<tr class="memdesc:ga76dd98d1f19ff5ce4b4e880dfcedadb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable to keep track of ISR nesting.  <a href="#ga76dd98d1f19ff5ce4b4e880dfcedadb9">More...</a><br/></td></tr>
<tr class="separator:ga76dd98d1f19ff5ce4b4e880dfcedadb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c74d77135d5a694029ce4805f5dbc13"><td class="memItemLeft" align="right" valign="top">const PORT_C_ROM <a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga7c74d77135d5a694029ce4805f5dbc13">pwr2LKP</a> [<a class="el" href="group__template__cpu__intf.html#gac4d9e19c50315dec7721d4bc4d6b0605">PORT_DATA_WIDTH_VAL</a>]</td></tr>
<tr class="memdesc:ga7c74d77135d5a694029ce4805f5dbc13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look up table for: 2^n expression.  <a href="#ga7c74d77135d5a694029ce4805f5dbc13">More...</a><br/></td></tr>
<tr class="separator:ga7c74d77135d5a694029ce4805f5dbc13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Port constants</h2></td></tr>
<tr class="memitem:gac4d9e19c50315dec7721d4bc4d6b0605"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gac4d9e19c50315dec7721d4bc4d6b0605">PORT_DATA_WIDTH_VAL</a>&#160;&#160;&#160;8U</td></tr>
<tr class="memdesc:gac4d9e19c50315dec7721d4bc4d6b0605"><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro specifies the bit width of CPU data registers.  <a href="#gac4d9e19c50315dec7721d4bc4d6b0605">More...</a><br/></td></tr>
<tr class="separator:gac4d9e19c50315dec7721d4bc4d6b0605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99f0219f12d2003e4e447fcaa06aa133"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga99f0219f12d2003e4e447fcaa06aa133">PORT_STCK_MINSIZE_VAL</a>&#160;&#160;&#160;(sizeof(struct <a class="el" href="structportCtx.html">portCtx</a>) / sizeof(<a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a>))</td></tr>
<tr class="memdesc:ga99f0219f12d2003e4e447fcaa06aa133"><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro specifies the minimal size of the thread stack.  <a href="#ga99f0219f12d2003e4e447fcaa06aa133">More...</a><br/></td></tr>
<tr class="separator:ga99f0219f12d2003e4e447fcaa06aa133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa909258f3d25701e167c8dcb2a004eaf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gaa909258f3d25701e167c8dcb2a004eaf">PORT_SYSTMR_ONE_TICK_VAL</a>&#160;&#160;&#160;(<a class="el" href="group__template__cpu__cfg.html#gac85c592962ba2c968d13f867533196a1">CFG_SYSTMR_CLOCK_FREQUENCY</a> / <a class="el" href="group__template__kern__cfg.html#ga4e46164ae5a37bfc54c67b6f01d93eb1">CFG_SYSTMR_EVENT_FREQUENCY</a>)</td></tr>
<tr class="memdesc:gaa909258f3d25701e167c8dcb2a004eaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">System timer reload value for one tick.  <a href="#gaa909258f3d25701e167c8dcb2a004eaf">More...</a><br/></td></tr>
<tr class="separator:gaa909258f3d25701e167c8dcb2a004eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b8bb3d2476505b4379ca2b87ec22547"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga5b8bb3d2476505b4379ca2b87ec22547">PORT_SYSTMR_MAX_VAL</a>&#160;&#160;&#160;0xFFU</td></tr>
<tr class="memdesc:ga5b8bb3d2476505b4379ca2b87ec22547"><td class="mdescLeft">&#160;</td><td class="mdescRight">System timer maximum value.  <a href="#ga5b8bb3d2476505b4379ca2b87ec22547">More...</a><br/></td></tr>
<tr class="separator:ga5b8bb3d2476505b4379ca2b87ec22547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad32a57bda2ce96037186e490b5a024e9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gad32a57bda2ce96037186e490b5a024e9">PORT_SYSTMR_MAX_TICKS_VAL</a>&#160;&#160;&#160;(<a class="el" href="group__template__cpu__intf.html#ga5b8bb3d2476505b4379ca2b87ec22547">PORT_SYSTMR_MAX_VAL</a> / PORT_SYSTMR_RELOAD_VAL)</td></tr>
<tr class="memdesc:gad32a57bda2ce96037186e490b5a024e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of ticks the system timer can accept.  <a href="#gad32a57bda2ce96037186e490b5a024e9">More...</a><br/></td></tr>
<tr class="separator:gad32a57bda2ce96037186e490b5a024e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f3862a2ded7b9fbb69f982acc020728"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga9f3862a2ded7b9fbb69f982acc020728">PORT_KVTMR_STCK_SIZE</a>&#160;&#160;&#160;40U</td></tr>
<tr class="memdesc:ga9f3862a2ded7b9fbb69f982acc020728"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kernel Virtual Timer Thread stack size.  <a href="#ga9f3862a2ded7b9fbb69f982acc020728">More...</a><br/></td></tr>
<tr class="separator:ga9f3862a2ded7b9fbb69f982acc020728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cb7ea9e526744b74367bbffda625044"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga2cb7ea9e526744b74367bbffda625044">PORT_KIDLE_STCK_SIZE</a>&#160;&#160;&#160;40U</td></tr>
<tr class="memdesc:ga2cb7ea9e526744b74367bbffda625044"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kernel Idle Thread stack size.  <a href="#ga2cb7ea9e526744b74367bbffda625044">More...</a><br/></td></tr>
<tr class="separator:ga2cb7ea9e526744b74367bbffda625044"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Interrupt management</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp0762f598cbb5b37886374004ead985d4"></a>PORT_ISR_... macros are used by esKernIsrEnter() and esKernIsrExit() functions. They are used to keep the current level of ISR nesting. Scheduler should be invoked only from the last ISR that is executing. </p>
</td></tr>
<tr class="memitem:gac73a0b0b3d8a130a8d8283be5bba057d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gac73a0b0b3d8a130a8d8283be5bba057d">PORT_INT_DISABLE</a>()</td></tr>
<tr class="memdesc:gac73a0b0b3d8a130a8d8283be5bba057d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable all interrupt sources.  <a href="#gac73a0b0b3d8a130a8d8283be5bba057d">More...</a><br/></td></tr>
<tr class="separator:gac73a0b0b3d8a130a8d8283be5bba057d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccad9298c874b29753b318d4f900cb75"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gaccad9298c874b29753b318d4f900cb75">PORT_ISR_ENTER</a>()</td></tr>
<tr class="memdesc:gaccad9298c874b29753b318d4f900cb75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter ISR. Increment gPortIsrNesting_ variable to keep track of ISR nesting.  <a href="#gaccad9298c874b29753b318d4f900cb75">More...</a><br/></td></tr>
<tr class="separator:gaccad9298c874b29753b318d4f900cb75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga267c312d7321e9361b454f4274bbc087"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga267c312d7321e9361b454f4274bbc087">PORT_ISR_EXIT</a>()</td></tr>
<tr class="memdesc:ga267c312d7321e9361b454f4274bbc087"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit ISR. Decrement gPortIsrNesting_ variable to keep track of ISR nesting.  <a href="#ga267c312d7321e9361b454f4274bbc087">More...</a><br/></td></tr>
<tr class="separator:ga267c312d7321e9361b454f4274bbc087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c0ea20c8e1f6b9751f51916da8e2aee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga6c0ea20c8e1f6b9751f51916da8e2aee">PORT_ISR_IS_LAST</a>()&#160;&#160;&#160;(0U == gPortIsrNesting ? TRUE : FALSE)</td></tr>
<tr class="memdesc:ga6c0ea20c8e1f6b9751f51916da8e2aee"><td class="mdescLeft">&#160;</td><td class="mdescRight">If isrNesting variable is zero then the last ISR is executing and scheduler should be invoked.  <a href="#ga6c0ea20c8e1f6b9751f51916da8e2aee">More...</a><br/></td></tr>
<tr class="separator:ga6c0ea20c8e1f6b9751f51916da8e2aee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Critical section management</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp43784aebc31664bf2b83e85766997ec9"></a>Disable/enable interrupts by preserving the status of interrupts.</p>
<p>Generally speaking these macros would store the status of the interrupt disable flag in the local variable declared by <a class="el" href="group__template__cpu__intf.html#gaecf0dc273d0d77b45baa682e0f2932ab">PORT_CRITICAL_DECL</a> and then disable interrupts. Local variable is allocated in all of eSolid RTOS functions that need to disable interrupts. Macros would restore the interrupt status by copying back the allocated variable into the CPU's status register. </p>
</td></tr>
<tr class="memitem:gaecf0dc273d0d77b45baa682e0f2932ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gaecf0dc273d0d77b45baa682e0f2932ab">PORT_CRITICAL_DECL</a>()&#160;&#160;&#160;<a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a> intStatus_</td></tr>
<tr class="memdesc:gaecf0dc273d0d77b45baa682e0f2932ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare the interrupt status variable.  <a href="#gaecf0dc273d0d77b45baa682e0f2932ab">More...</a><br/></td></tr>
<tr class="separator:gaecf0dc273d0d77b45baa682e0f2932ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad230b116bf8bc513e64c533d4e946054"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gad230b116bf8bc513e64c533d4e946054">PORT_CRITICAL_ENTER</a>()</td></tr>
<tr class="memdesc:gad230b116bf8bc513e64c533d4e946054"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter critical section.  <a href="#gad230b116bf8bc513e64c533d4e946054">More...</a><br/></td></tr>
<tr class="separator:gad230b116bf8bc513e64c533d4e946054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga95082ec189f12ed8e39efbda811dea77"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga95082ec189f12ed8e39efbda811dea77">PORT_CRITICAL_EXIT</a>()</td></tr>
<tr class="memdesc:ga95082ec189f12ed8e39efbda811dea77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit critical section.  <a href="#ga95082ec189f12ed8e39efbda811dea77">More...</a><br/></td></tr>
<tr class="separator:ga95082ec189f12ed8e39efbda811dea77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Scheduler support</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp4dcdbeafb69eec06b5ccc9a6733244b8"></a></p>
<dl class="section note"><dt>Note</dt><dd>These functions are extensively used by the scheduler and therefore they should be optimized for the architecture being used. </dd></dl>
</td></tr>
<tr class="memitem:ga548cbf806bfd34904f60a1f8db0ce965"><td class="memItemLeft" align="right" valign="top">uint_fast8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga548cbf806bfd34904f60a1f8db0ce965">portFindLastSet_</a> (<a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a> val)</td></tr>
<tr class="memdesc:ga548cbf806bfd34904f60a1f8db0ce965"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find last set bit in a word.  <a href="#ga548cbf806bfd34904f60a1f8db0ce965">More...</a><br/></td></tr>
<tr class="separator:ga548cbf806bfd34904f60a1f8db0ce965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5574dfe2108fc8a4cf83647113724052"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga5574dfe2108fc8a4cf83647113724052">PORT_FIND_LAST_SET</a>(val)&#160;&#160;&#160;<a class="el" href="group__template__cpu__impl.html#ga548cbf806bfd34904f60a1f8db0ce965">portFindLastSet_</a>(val)</td></tr>
<tr class="memdesc:ga5574dfe2108fc8a4cf83647113724052"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find last set bit in a word.  <a href="#ga5574dfe2108fc8a4cf83647113724052">More...</a><br/></td></tr>
<tr class="separator:ga5574dfe2108fc8a4cf83647113724052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b938b55e8398b93969cfb7bc64177cd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga4b938b55e8398b93969cfb7bc64177cd">PORT_PWR2</a>(pwr)&#160;&#160;&#160;(1U &lt;&lt; (pwr))</td></tr>
<tr class="memdesc:ga4b938b55e8398b93969cfb7bc64177cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper macro: calculate 2^pwr expression.  <a href="#ga4b938b55e8398b93969cfb7bc64177cd">More...</a><br/></td></tr>
<tr class="separator:ga4b938b55e8398b93969cfb7bc64177cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4de1f7cd0b489825c5f3d848211fa01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gae4de1f7cd0b489825c5f3d848211fa01">PORT_SYSTMR_INIT</a>()</td></tr>
<tr class="memdesc:gae4de1f7cd0b489825c5f3d848211fa01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize system timer and associated interrupt.  <a href="#gae4de1f7cd0b489825c5f3d848211fa01">More...</a><br/></td></tr>
<tr class="separator:gae4de1f7cd0b489825c5f3d848211fa01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9da245ecf0f472f0e749fb360d1dd056"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga9da245ecf0f472f0e749fb360d1dd056">PORT_SYSTMR_TERM</a>()</td></tr>
<tr class="memdesc:ga9da245ecf0f472f0e749fb360d1dd056"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the timer if it is running and disable associated interrupt.  <a href="#ga9da245ecf0f472f0e749fb360d1dd056">More...</a><br/></td></tr>
<tr class="separator:ga9da245ecf0f472f0e749fb360d1dd056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga148b9eebb96ac28f7e84b94602d3b971"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga148b9eebb96ac28f7e84b94602d3b971">PORT_SYSTMR_GET_RVAL</a>()</td></tr>
<tr class="memdesc:ga148b9eebb96ac28f7e84b94602d3b971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get system timer reload value.  <a href="#ga148b9eebb96ac28f7e84b94602d3b971">More...</a><br/></td></tr>
<tr class="separator:ga148b9eebb96ac28f7e84b94602d3b971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf78b07f0013cd7a1d06b258e37016e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gacf78b07f0013cd7a1d06b258e37016e3">PORT_SYSTMR_GET_CVAL</a>()</td></tr>
<tr class="memdesc:gacf78b07f0013cd7a1d06b258e37016e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get system timer current value.  <a href="#gacf78b07f0013cd7a1d06b258e37016e3">More...</a><br/></td></tr>
<tr class="separator:gacf78b07f0013cd7a1d06b258e37016e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga978c719faf8d3026aa9714561e8cd522"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga978c719faf8d3026aa9714561e8cd522">PORT_SYSTMR_RLD</a>(val)</td></tr>
<tr class="memdesc:ga978c719faf8d3026aa9714561e8cd522"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reload the system timer with specified number.  <a href="#ga978c719faf8d3026aa9714561e8cd522">More...</a><br/></td></tr>
<tr class="separator:ga978c719faf8d3026aa9714561e8cd522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga566d86ffb8459153b9bc95a7d9dfb8ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga566d86ffb8459153b9bc95a7d9dfb8ca">PORT_SYSTMR_ENABLE</a>()</td></tr>
<tr class="memdesc:ga566d86ffb8459153b9bc95a7d9dfb8ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the system timer.  <a href="#ga566d86ffb8459153b9bc95a7d9dfb8ca">More...</a><br/></td></tr>
<tr class="separator:ga566d86ffb8459153b9bc95a7d9dfb8ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a361d660165aff766184242c274fe40"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga2a361d660165aff766184242c274fe40">PORT_SYSTMR_DISABLE</a>()</td></tr>
<tr class="memdesc:ga2a361d660165aff766184242c274fe40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the system timer.  <a href="#ga2a361d660165aff766184242c274fe40">More...</a><br/></td></tr>
<tr class="separator:ga2a361d660165aff766184242c274fe40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3863363d274eeebcf2ad0a3887068e87"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga3863363d274eeebcf2ad0a3887068e87">PORT_SYSTMR_ISR_ENABLE</a>()</td></tr>
<tr class="memdesc:ga3863363d274eeebcf2ad0a3887068e87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the system timer interrupt.  <a href="#ga3863363d274eeebcf2ad0a3887068e87">More...</a><br/></td></tr>
<tr class="separator:ga3863363d274eeebcf2ad0a3887068e87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2054b84d008e800a13b0e25f93e2dd9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gac2054b84d008e800a13b0e25f93e2dd9">PORT_SYSTMR_ISR_DISABLE</a>()</td></tr>
<tr class="memdesc:gac2054b84d008e800a13b0e25f93e2dd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the system timer interrupt.  <a href="#gac2054b84d008e800a13b0e25f93e2dd9">More...</a><br/></td></tr>
<tr class="separator:gac2054b84d008e800a13b0e25f93e2dd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Dispatcher context switching</h2></td></tr>
<tr class="memitem:ga91a1dc500f743c80ec573148a99add67"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga91a1dc500f743c80ec573148a99add67">portCtxInit_</a> (void *stck, size_t stckSize, void(*fn)(void *), void *arg)</td></tr>
<tr class="memdesc:ga91a1dc500f743c80ec573148a99add67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the thread context.  <a href="#ga91a1dc500f743c80ec573148a99add67">More...</a><br/></td></tr>
<tr class="separator:ga91a1dc500f743c80ec573148a99add67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80d15a56d61c9d4e786e52006ff4ac43"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga80d15a56d61c9d4e786e52006ff4ac43">PORT_CTX_INIT</a>(stck, stackSize, thread, arg)</td></tr>
<tr class="memdesc:ga80d15a56d61c9d4e786e52006ff4ac43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the thread context.  <a href="#ga80d15a56d61c9d4e786e52006ff4ac43">More...</a><br/></td></tr>
<tr class="separator:ga80d15a56d61c9d4e786e52006ff4ac43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50a3b72a7f2065922811f0d6dedda01a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga50a3b72a7f2065922811f0d6dedda01a">PORT_CTX_SW</a>()</td></tr>
<tr class="memdesc:ga50a3b72a7f2065922811f0d6dedda01a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do the context switch - invoked from API level.  <a href="#ga50a3b72a7f2065922811f0d6dedda01a">More...</a><br/></td></tr>
<tr class="separator:ga50a3b72a7f2065922811f0d6dedda01a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20bba8f9c5a2f38fd7c63b9d2320e511"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga20bba8f9c5a2f38fd7c63b9d2320e511">PORT_CTX_SW_ISR</a>()</td></tr>
<tr class="memdesc:ga20bba8f9c5a2f38fd7c63b9d2320e511"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do the context switch - invoked from ISR level.  <a href="#ga20bba8f9c5a2f38fd7c63b9d2320e511">More...</a><br/></td></tr>
<tr class="separator:ga20bba8f9c5a2f38fd7c63b9d2320e511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07b918aaaed3cd0dbe89eb780ce3cb36"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga07b918aaaed3cd0dbe89eb780ce3cb36">PORT_THD_START</a>()</td></tr>
<tr class="memdesc:ga07b918aaaed3cd0dbe89eb780ce3cb36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the first thread.  <a href="#ga07b918aaaed3cd0dbe89eb780ce3cb36">More...</a><br/></td></tr>
<tr class="separator:ga07b918aaaed3cd0dbe89eb780ce3cb36"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
General port macros</h2></td></tr>
<tr class="memitem:gacb3a46e89d327fbaf5c122fe23877b24"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gacb3a46e89d327fbaf5c122fe23877b24">PORT_STCK_SIZE</a>(size)</td></tr>
<tr class="memdesc:gacb3a46e89d327fbaf5c122fe23877b24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the stack size.  <a href="#gacb3a46e89d327fbaf5c122fe23877b24">More...</a><br/></td></tr>
<tr class="separator:gacb3a46e89d327fbaf5c122fe23877b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad699a79233d442ae90a69c113e314542"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gad699a79233d442ae90a69c113e314542">PORT_CRITICAL_EXIT_SLEEP</a>()&#160;&#160;&#160;portIntSetSleepEnter_(intStatus_)</td></tr>
<tr class="memdesc:gad699a79233d442ae90a69c113e314542"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit critical section and enter sleep state.  <a href="#gad699a79233d442ae90a69c113e314542">More...</a><br/></td></tr>
<tr class="separator:gad699a79233d442ae90a69c113e314542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9622b857ad35f73ae92a44a9d0f717c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gac9622b857ad35f73ae92a44a9d0f717c">PORT_INIT_EARLY</a>()</td></tr>
<tr class="memdesc:gac9622b857ad35f73ae92a44a9d0f717c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Early port initialization.  <a href="#gac9622b857ad35f73ae92a44a9d0f717c">More...</a><br/></td></tr>
<tr class="separator:gac9622b857ad35f73ae92a44a9d0f717c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0da077bab2264b11c4107f0bef279b86"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga0da077bab2264b11c4107f0bef279b86">PORT_INIT</a>()</td></tr>
<tr class="memdesc:ga0da077bab2264b11c4107f0bef279b86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Port initialization.  <a href="#ga0da077bab2264b11c4107f0bef279b86">More...</a><br/></td></tr>
<tr class="separator:ga0da077bab2264b11c4107f0bef279b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8bfda2e0a8029092d0377640ba228b6d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#ga8bfda2e0a8029092d0377640ba228b6d">PORT_INIT_LATE</a>()</td></tr>
<tr class="memdesc:ga8bfda2e0a8029092d0377640ba228b6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Late port initialization.  <a href="#ga8bfda2e0a8029092d0377640ba228b6d">More...</a><br/></td></tr>
<tr class="separator:ga8bfda2e0a8029092d0377640ba228b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab2a39b200d6e6806896ba45a9c3a9d1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__template__cpu__intf.html#gab2a39b200d6e6806896ba45a9c3a9d1e">PORT_TERM</a>()</td></tr>
<tr class="memdesc:gab2a39b200d6e6806896ba45a9c3a9d1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate port.  <a href="#gab2a39b200d6e6806896ba45a9c3a9d1e">More...</a><br/></td></tr>
<tr class="separator:gab2a39b200d6e6806896ba45a9c3a9d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>CPU port macros and functions. </p>
<p>Since this header file is included with the API of the kernel a few naming conventions are defined in order to avoid name clashing with the names of objects from libraries included by application code.</p>
<dl class="section user"><dt>1) Macro naming conventions</dt><dd>For macro naming try to follow these rules:<ul>
<li>All standard PORT API macro names are prefixed with: <b><code>PORT_</code>.</b> </li>
<li>All other macros which are specific to the port used are prefixed with: <b><code>CPU_</code>.</b> </li>
</ul>
</dd></dl>
<dl class="section user"><dt>2) Type declaration naming conventions</dt><dd>For type declaration naming try to follow these rules:<ul>
<li>All type declaration names are prefixed with: <b><code>cpu</code>.</b> </li>
</ul>
</dd></dl>
<dl class="section user"><dt>3) Global variable naming conventions</dt><dd>For global variable naming try to follow these rules:<ul>
<li>All global variable names are prefixed with: <b><code>cpu</code>.</b> </li>
</ul>
</dd></dl>
<dl class="section user"><dt>4) Funcion naming convetions</dt><dd>For functions naming try to follow these rules:<ul>
<li>All function names are prefixed with: <b><code>port</code></b> and postfixed with: <b><code>_</code> </b>(underscore).</li>
<li>All other functions which are specific to the port used are prefixed with: <b><code>cpu</code></b> and postfixed with: <b><code>_</code> </b>(underscore).</li>
<li>The <code>exception</code> to above two rules are the names of functions used for Interrupt Service Routines. They can have any name required by port. </li>
</ul>
</dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gac4d9e19c50315dec7721d4bc4d6b0605"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_DATA_WIDTH_VAL&#160;&#160;&#160;8U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This macro specifies the bit width of CPU data registers. </p>

</div>
</div>
<a class="anchor" id="ga99f0219f12d2003e4e447fcaa06aa133"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_STCK_MINSIZE_VAL&#160;&#160;&#160;(sizeof(struct <a class="el" href="structportCtx.html">portCtx</a>) / sizeof(<a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This macro specifies the minimal size of the thread stack. </p>
<p>Generally minimal stack size is equal to the size of context structure </p>

</div>
</div>
<a class="anchor" id="gaa909258f3d25701e167c8dcb2a004eaf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_ONE_TICK_VAL&#160;&#160;&#160;(<a class="el" href="group__template__cpu__cfg.html#gac85c592962ba2c968d13f867533196a1">CFG_SYSTMR_CLOCK_FREQUENCY</a> / <a class="el" href="group__template__kern__cfg.html#ga4e46164ae5a37bfc54c67b6f01d93eb1">CFG_SYSTMR_EVENT_FREQUENCY</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>System timer reload value for one tick. </p>
<p>This is a calculated value for one system tick period </p>

</div>
</div>
<a class="anchor" id="ga5b8bb3d2476505b4379ca2b87ec22547"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_MAX_VAL&#160;&#160;&#160;0xFFU</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>System timer maximum value. </p>
<p>This macro specifies maximum value that can be reloaded into system timer counter. For example, if the system timer is a 8-bit counter than this macro would have the value of 0xFFU. </p>

</div>
</div>
<a class="anchor" id="gad32a57bda2ce96037186e490b5a024e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_MAX_TICKS_VAL&#160;&#160;&#160;(<a class="el" href="group__template__cpu__intf.html#ga5b8bb3d2476505b4379ca2b87ec22547">PORT_SYSTMR_MAX_VAL</a> / PORT_SYSTMR_RELOAD_VAL)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of ticks the system timer can accept. </p>

</div>
</div>
<a class="anchor" id="ga9f3862a2ded7b9fbb69f982acc020728"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_KVTMR_STCK_SIZE&#160;&#160;&#160;40U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kernel Virtual Timer Thread stack size. </p>

</div>
</div>
<a class="anchor" id="ga2cb7ea9e526744b74367bbffda625044"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_KIDLE_STCK_SIZE&#160;&#160;&#160;40U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kernel Idle Thread stack size. </p>

</div>
</div>
<a class="anchor" id="gac73a0b0b3d8a130a8d8283be5bba057d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_INT_DISABLE</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable all interrupt sources. </p>

</div>
</div>
<a class="anchor" id="gaccad9298c874b29753b318d4f900cb75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_ISR_ENTER</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                                        <a class="code" href="group__template__cpu__intf.html#ga76dd98d1f19ff5ce4b4e880dfcedadb9">\</a></div>
<div class="line"><a class="code" href="group__template__cpu__intf.html#ga76dd98d1f19ff5ce4b4e880dfcedadb9">        gPortIsrNesting_</a>++;                                                     <a class="code" href="group__kern__intf.html#ga194f9cbc5398fe0938504a378fcff810">\</a></div>
<div class="line"><a class="code" href="group__kern__intf.html#ga194f9cbc5398fe0938504a378fcff810">        esKernIsrPrologueI</a>();                                                   \</div>
<div class="line">    } <span class="keywordflow">while</span> (0U)</div>
<div class="ttc" id="group__template__cpu__intf_html_ga76dd98d1f19ff5ce4b4e880dfcedadb9"><div class="ttname"><a href="group__template__cpu__intf.html#ga76dd98d1f19ff5ce4b4e880dfcedadb9">gPortIsrNesting_</a></div><div class="ttdeci">portReg_T gPortIsrNesting_</div><div class="ttdoc">Variable to keep track of ISR nesting. </div><div class="ttdef"><b>Definition:</b> cpu.c:39</div></div>
<div class="ttc" id="group__kern__intf_html_ga194f9cbc5398fe0938504a378fcff810"><div class="ttname"><a href="group__kern__intf.html#ga194f9cbc5398fe0938504a378fcff810">esKernIsrPrologueI</a></div><div class="ttdeci">void esKernIsrPrologueI(void)</div><div class="ttdoc">Enter Interrupt Service Routine. </div><div class="ttdef"><b>Definition:</b> kernel.c:1024</div></div>
</div><!-- fragment -->
<p>Enter ISR. Increment gPortIsrNesting_ variable to keep track of ISR nesting. </p>
<p>Variable gPortIsrNesting_ is needed only if the port does not support any other method of detecting when the last ISR is executing. </p>

</div>
</div>
<a class="anchor" id="ga267c312d7321e9361b454f4274bbc087"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_ISR_EXIT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                                        <a class="code" href="group__template__cpu__intf.html#ga76dd98d1f19ff5ce4b4e880dfcedadb9">\</a></div>
<div class="line"><a class="code" href="group__template__cpu__intf.html#ga76dd98d1f19ff5ce4b4e880dfcedadb9">        gPortIsrNesting_</a>--;                                                     <a class="code" href="group__kern__intf.html#ga62d9b43eb8faf6c5df37e7b89811ac8d">\</a></div>
<div class="line"><a class="code" href="group__kern__intf.html#ga62d9b43eb8faf6c5df37e7b89811ac8d">        esKernIsrEpilogueI</a>();                                                   \</div>
<div class="line">    } <span class="keywordflow">while</span> (0U)</div>
<div class="ttc" id="group__kern__intf_html_ga62d9b43eb8faf6c5df37e7b89811ac8d"><div class="ttname"><a href="group__kern__intf.html#ga62d9b43eb8faf6c5df37e7b89811ac8d">esKernIsrEpilogueI</a></div><div class="ttdeci">void esKernIsrEpilogueI(void)</div><div class="ttdoc">Exit Interrupt Service Routine. </div><div class="ttdef"><b>Definition:</b> kernel.c:1032</div></div>
<div class="ttc" id="group__template__cpu__intf_html_ga76dd98d1f19ff5ce4b4e880dfcedadb9"><div class="ttname"><a href="group__template__cpu__intf.html#ga76dd98d1f19ff5ce4b4e880dfcedadb9">gPortIsrNesting_</a></div><div class="ttdeci">portReg_T gPortIsrNesting_</div><div class="ttdoc">Variable to keep track of ISR nesting. </div><div class="ttdef"><b>Definition:</b> cpu.c:39</div></div>
</div><!-- fragment -->
<p>Exit ISR. Decrement gPortIsrNesting_ variable to keep track of ISR nesting. </p>
<p>Variable gPortIsrNesting_ is needed only if the port does not support any other method of detecting when the last ISR is executing. </p>

</div>
</div>
<a class="anchor" id="ga6c0ea20c8e1f6b9751f51916da8e2aee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_ISR_IS_LAST</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(0U == gPortIsrNesting ? TRUE : FALSE)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If isrNesting variable is zero then the last ISR is executing and scheduler should be invoked. </p>
<dl class="section return"><dt>Returns</dt><dd>Is the currently executed ISR the last one? </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TRUE</td><td>- this is last ISR </td></tr>
    <tr><td class="paramname">FALSE</td><td>- this is not the last ISR </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaecf0dc273d0d77b45baa682e0f2932ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_CRITICAL_DECL</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a> intStatus_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declare the interrupt status variable. </p>
<p>This variable is used to store the current state of enabled ISRs. </p>

</div>
</div>
<a class="anchor" id="gad230b116bf8bc513e64c533d4e946054"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_CRITICAL_ENTER</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enter critical section. </p>

</div>
</div>
<a class="anchor" id="ga95082ec189f12ed8e39efbda811dea77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_CRITICAL_EXIT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exit critical section. </p>

</div>
</div>
<a class="anchor" id="ga5574dfe2108fc8a4cf83647113724052"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_FIND_LAST_SET</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__template__cpu__impl.html#ga548cbf806bfd34904f60a1f8db0ce965">portFindLastSet_</a>(val)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find last set bit in a word. </p>
<p>This function is used by the scheduler to efficiently determine the highest priority of thread ready for execution. For algorithm details see: <a href="http://en.wikipedia.org/wiki/Find_first_set">http://en.wikipedia.org/wiki/Find_first_set</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>The position of the last set bit in a word </dd></dl>

</div>
</div>
<a class="anchor" id="ga4b938b55e8398b93969cfb7bc64177cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_PWR2</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pwr</td><td>)</td>
          <td>&#160;&#160;&#160;(1U &lt;&lt; (pwr))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper macro: calculate 2^pwr expression. </p>
<p>Some ports may want to use look up tables instead of shifting operation </p>

</div>
</div>
<a class="anchor" id="gae4de1f7cd0b489825c5f3d848211fa01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_INIT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize system timer and associated interrupt. </p>
<p>This macro will only initialize system timer and associated interrupt. The macro is called from <a class="el" href="group__kern__intf.html#ga0e7a0a6b9c02df58de0f98de0229a09d" title="Start the multi-threading. ">esKernStart()</a> function. Responsibility:</p>
<ul>
<li>initialize system timer</li>
<li>initialize system timer interrupt <dl class="section note"><dt>Note</dt><dd>This macro MUST NOT enable system timer events. System timer events are enabled/disabled by <a class="el" href="group__template__cpu__intf.html#ga3863363d274eeebcf2ad0a3887068e87" title="Enable the system timer interrupt. ">PORT_SYSTMR_ISR_ENABLE()</a> and <a class="el" href="group__template__cpu__intf.html#gac2054b84d008e800a13b0e25f93e2dd9" title="Disable the system timer interrupt. ">PORT_SYSTMR_ISR_DISABLE()</a> macros. </dd></dl>
</li>
</ul>

</div>
</div>
<a class="anchor" id="ga9da245ecf0f472f0e749fb360d1dd056"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_TERM</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the timer if it is running and disable associated interrupt. </p>
<p>Responsibility:</p>
<ul>
<li>disable system timer interrupt</li>
<li>stop and disable system timer </li>
</ul>

</div>
</div>
<a class="anchor" id="ga148b9eebb96ac28f7e84b94602d3b971"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_GET_RVAL</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get system timer reload value. </p>

</div>
</div>
<a class="anchor" id="gacf78b07f0013cd7a1d06b258e37016e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_GET_CVAL</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get system timer current value. </p>

</div>
</div>
<a class="anchor" id="ga978c719faf8d3026aa9714561e8cd522"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_RLD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reload the system timer with specified number. </p>
<p>Responsibility:</p>
<ul>
<li>stop the system timer</li>
<li>reload the system timer</li>
<li>start the system timer </li>
</ul>

</div>
</div>
<a class="anchor" id="ga566d86ffb8459153b9bc95a7d9dfb8ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_ENABLE</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable the system timer. </p>
<p>Responsibility:</p>
<ul>
<li>enable (run) the system timer counter </li>
</ul>

</div>
</div>
<a class="anchor" id="ga2a361d660165aff766184242c274fe40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_DISABLE</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the system timer. </p>
<p>Responsibility:</p>
<ul>
<li>disable (stop) the system timer counter </li>
</ul>

</div>
</div>
<a class="anchor" id="ga3863363d274eeebcf2ad0a3887068e87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_ISR_ENABLE</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable the system timer interrupt. </p>
<p>Responsibility:</p>
<ul>
<li>allow system timer interrupt to occur </li>
</ul>

</div>
</div>
<a class="anchor" id="gac2054b84d008e800a13b0e25f93e2dd9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_SYSTMR_ISR_DISABLE</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the system timer interrupt. </p>
<p>Responsibility:</p>
<ul>
<li>disallow system timer interrupt to occur </li>
</ul>

</div>
</div>
<a class="anchor" id="ga80d15a56d61c9d4e786e52006ff4ac43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_CTX_INIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">stck, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">stackSize, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">thread, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">arg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the thread context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">stck</td><td>Pointer to the allocated thread stck. The pointer points to the beginning of the memory as defined per C language. It's up to port function to adjust the pointer according to the stck type: full descending or full ascending one. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">stackSize</td><td>The size of allocated stck in bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thread</td><td>Pointer to the thread function. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Argument that will be passed to thread function at the starting of execution. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new top of stck after thread context initialization. </dd></dl>

</div>
</div>
<a class="anchor" id="ga50a3b72a7f2065922811f0d6dedda01a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_CTX_SW</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do the context switch - invoked from API level. </p>

</div>
</div>
<a class="anchor" id="ga20bba8f9c5a2f38fd7c63b9d2320e511"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_CTX_SW_ISR</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do the context switch - invoked from ISR level. </p>

</div>
</div>
<a class="anchor" id="ga07b918aaaed3cd0dbe89eb780ce3cb36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_THD_START</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the first thread. </p>

</div>
</div>
<a class="anchor" id="gacb3a46e89d327fbaf5c122fe23877b24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_STCK_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((((size + <a class="code" href="group__template__cpu__intf.html#ga99f0219f12d2003e4e447fcaa06aa133">PORT_STCK_MINSIZE_VAL</a>) + (<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structportStck.html">portStck</a>) /                  \</div>
<div class="line">    sizeof(<a class="code" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a>))) - 1U) / (<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structportStck.html">portStck</a>)/<span class="keyword">sizeof</span>(<a class="code" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a>)))</div>
<div class="ttc" id="group__template__cpu__intf_html_ga99980ab56ce9857e7380210d12e3d41f"><div class="ttname"><a href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a></div><div class="ttdeci">uint8_t portReg_T</div><div class="ttdoc">Data type which corresponds to the general purpose register. </div><div class="ttdef"><b>Definition:</b> cpu.h:347</div></div>
<div class="ttc" id="structportStck_html"><div class="ttname"><a href="structportStck.html">portStck</a></div><div class="ttdoc">Stack structure used for stack declaration in order to force the alignment Alignment of stack structu...</div><div class="ttdef"><b>Definition:</b> cpu.h:352</div></div>
<div class="ttc" id="group__template__cpu__intf_html_ga99f0219f12d2003e4e447fcaa06aa133"><div class="ttname"><a href="group__template__cpu__intf.html#ga99f0219f12d2003e4e447fcaa06aa133">PORT_STCK_MINSIZE_VAL</a></div><div class="ttdeci">#define PORT_STCK_MINSIZE_VAL</div><div class="ttdoc">This macro specifies the minimal size of the thread stack. </div><div class="ttdef"><b>Definition:</b> cpu.h:81</div></div>
</div><!-- fragment -->
<p>Calculate the stack size. </p>
<p>This macro is used when specifying the size of thread stack. Responsibility:</p>
<ul>
<li>add to <code>size</code> the minimal stack size specified by <a class="el" href="group__template__cpu__intf.html#ga99f0219f12d2003e4e447fcaa06aa133">PORT_STCK_MINSIZE_VAL</a>.</li>
<li>if it is needed by the port make sure the alignment is correct. </li>
</ul>

</div>
</div>
<a class="anchor" id="gad699a79233d442ae90a69c113e314542"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_CRITICAL_EXIT_SLEEP</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;portIntSetSleepEnter_(intStatus_)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exit critical section and enter sleep state. </p>

</div>
</div>
<a class="anchor" id="gac9622b857ad35f73ae92a44a9d0f717c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_INIT_EARLY</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Early port initialization. </p>
<p>This macro will be called at early initialization stage from <a class="el" href="group__kern__intf.html#ga9e9ff699d62d6035cd51121bb3140704" title="Initialize kernel internal data structures. ">esKernInit()</a> function. It is called before any kernel data initialization. Usually this macro would be used to setup memory space, fill the memory with debug value or something similar. </p>

</div>
</div>
<a class="anchor" id="ga0da077bab2264b11c4107f0bef279b86"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_INIT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Port initialization. </p>
<p>This macro will be called after kernel data structure initialization from <a class="el" href="group__kern__intf.html#ga9e9ff699d62d6035cd51121bb3140704" title="Initialize kernel internal data structures. ">esKernInit()</a> function. </p>

</div>
</div>
<a class="anchor" id="ga8bfda2e0a8029092d0377640ba228b6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_INIT_LATE</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Late port initialization. </p>
<p>This macro will be called just a moment before the multitasking is started. The macro is called from <a class="el" href="group__kern__intf.html#ga0e7a0a6b9c02df58de0f98de0229a09d" title="Start the multi-threading. ">esKernStart()</a> function. </p>

</div>
</div>
<a class="anchor" id="gab2a39b200d6e6806896ba45a9c3a9d1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_TERM</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminate port. </p>
<p>This macro will be called when there is a need to stop any further execution (example: an error occured and CPU needs to stop). </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga99980ab56ce9857e7380210d12e3d41f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data type which corresponds to the general purpose register. </p>

</div>
</div>
<a class="anchor" id="ga13cc91970e3e05fe4210440c068d3f4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structportStck.html">portStck</a> <a class="el" href="group__template__cpu__intf.html#ga13cc91970e3e05fe4210440c068d3f4a">portStck_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stack type. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga548cbf806bfd34904f60a1f8db0ce965"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint_fast8_t portFindLastSet_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a>&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find last set bit in a word. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>Value which needs to be evaluated</td></tr>
  </table>
  </dd>
</dl>
<p>This function is used by the scheduler to efficiently determine the highest priority of thread ready for execution. For algorithm details see: <a href="http://en.wikipedia.org/wiki/Find_first_set">http://en.wikipedia.org/wiki/Find_first_set</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>The position of the last set bit in a word </dd></dl>

</div>
</div>
<a class="anchor" id="ga91a1dc500f743c80ec573148a99add67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* portCtxInit_ </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>stck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>stckSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the thread context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stck</td><td>Pointer to the allocated thread stck. The pointer points to the beginning of the memory as defined per C language. It's up to port function to adjust the pointer according to the stck type: full descending or full ascending one. </td></tr>
    <tr><td class="paramname">stckSize</td><td>The size of allocated stck in bytes. </td></tr>
    <tr><td class="paramname">fn</td><td>Pointer to the thread function. </td></tr>
    <tr><td class="paramname">arg</td><td>Argument that will be passed to thread function at the starting of execution. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new top of stck after thread context initialization. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga76dd98d1f19ff5ce4b4e880dfcedadb9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a> gPortIsrNesting_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variable to keep track of ISR nesting. </p>

</div>
</div>
<a class="anchor" id="ga7c74d77135d5a694029ce4805f5dbc13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const PORT_C_ROM <a class="el" href="group__template__cpu__intf.html#ga99980ab56ce9857e7380210d12e3d41f">portReg_T</a> pwr2LKP[<a class="el" href="group__template__cpu__intf.html#gac4d9e19c50315dec7721d4bc4d6b0605">PORT_DATA_WIDTH_VAL</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Look up table for: 2^n expression. </p>
<p>This look up table can be used to accelerate the Logical Shift Left operations which are needed to set bits inside the priority bit map. In plain C this operation would be written as: <code>(1U &lt;&lt; n)</code>, but in many 8-bit CPUs this operation can be lengthy. If there is a need for faster operation than this table can be used instead of the mentioned C code.</p>
<p>To use the look up table change <a class="el" href="group__template__cpu__intf.html#ga4b938b55e8398b93969cfb7bc64177cd">PORT_PWR2</a> macro implementation from: <code>(1U &lt;&lt; (pwr))</code> to <code>pwr2LKP[pwr]</code> </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
